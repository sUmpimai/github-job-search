{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ped/Documents/jolimoi-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ped/Documents/jolimoi-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/ped/Documents/jolimoi-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ped/Documents/jolimoi-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ped/Documents/jolimoi-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ped/Documents/jolimoi-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import*as React from'react';import{ProductSearch}from'../ProductSearch/ProductSearch';import ProductList from'./ProductResult/ProductList';import{LoadMore}from'../Loadmore/LoadMore';var ProductSearchContainer=/*#__PURE__*/function(_React$Component){_inherits(ProductSearchContainer,_React$Component);var _super=_createSuper(ProductSearchContainer);function ProductSearchContainer(){var _this;_classCallCheck(this,ProductSearchContainer);_this=_super.call(this);_this.fetchProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(query){var apiUrl,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({isLoading:true});apiUrl='https://cors-anywhere.herokuapp.com/https://skincare-api.herokuapp.com/product?q=';_context.prev=2;_context.next=5;return fetch(apiUrl+query);case 5:res=_context.sent;_context.next=8;return res.json();case 8:data=_context.sent;_this.setState({products:data,isLoading:false,total:data.length,showItems:4});_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);_this.setState({error:_context.t0,isLoading:false});case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onSearchInputChange=function(e){_this.setState({searchValue:e.target.value});};_this.resetInput=function(){_this.setState({searchValue:''});};_this.onSearch=function(e){e.preventDefault();_this.fetchProducts(_this.state.searchValue);_this.resetInput();};_this.handleShowMore=function(){_this.setState({showItems:_this.state.showItems>=_this.state.totalProducts?_this.state.showItems:_this.state.showItems+10});};_this.state={searchValue:'',isLoading:false,products:[],error:null,showItems:4,total:null};return _this;}_createClass(ProductSearchContainer,[{key:\"render\",value:function render(){var _this$state=this.state,searchValue=_this$state.searchValue,products=_this$state.products,isLoading=_this$state.isLoading,error=_this$state.error,total=_this$state.total,showItems=_this$state.showItems;return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(ProductSearch,{searchValue:searchValue,onSearch:this.onSearch,onSearchInputChange:this.onSearchInputChange}),/*#__PURE__*/React.createElement(ProductList,{products:products,isLoading:isLoading,errorMessage:error,total:total,pageSize:showItems}),/*#__PURE__*/React.createElement(LoadMore,{products:products,isLoading:isLoading,onClick:this.handleShowMore})));}}]);return ProductSearchContainer;}(React.Component);export default ProductSearchContainer;","map":{"version":3,"sources":["/Users/ped/Documents/jolimoi-test/src/components/ProductSearch/ProductSearchContainer.js"],"names":["React","ProductSearch","ProductList","LoadMore","ProductSearchContainer","fetchProducts","query","setState","isLoading","apiUrl","fetch","res","json","data","products","total","length","showItems","error","onSearchInputChange","e","searchValue","target","value","resetInput","onSearch","preventDefault","state","handleShowMore","totalProducts","Component"],"mappings":"63BAAA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,OAAvB,CACA,OAASC,aAAT,KAA8B,gCAA9B,CACA,MAAOC,CAAAA,WAAP,KAAwB,6BAAxB,CACA,OAASC,QAAT,KAAyB,sBAAzB,C,GAEMC,CAAAA,sB,4IACF,iCAAc,wDACV,wBADU,MAYdC,aAZc,0FAYE,iBAAOC,KAAP,sIACZ,MAAKC,QAAL,CAAc,CAAEC,SAAS,CAAE,IAAb,CAAd,EACMC,MAFM,CAEG,mFAFH,uCAKUC,CAAAA,KAAK,CAACD,MAAM,CAAGH,KAAV,CALf,QAKFK,GALE,qCAMWA,CAAAA,GAAG,CAACC,IAAJ,EANX,QAMFC,IANE,eAQR,MAAKN,QAAL,CAAc,CACVO,QAAQ,CAAED,IADA,CAEVL,SAAS,CAAE,KAFD,CAGVO,KAAK,CAAEF,IAAI,CAACG,MAHF,CAIVC,SAAS,CAAE,CAJD,CAAd,EARQ,iFAeR,MAAKV,QAAL,CAAc,CAAEW,KAAK,YAAP,CAASV,SAAS,CAAE,KAApB,CAAd,EAfQ,qEAZF,qEAgCdW,mBAhCc,CAgCQ,SAACC,CAAD,CAAO,CACzB,MAAKb,QAAL,CAAc,CAAEc,WAAW,CAAED,CAAC,CAACE,MAAF,CAASC,KAAxB,CAAd,EACH,CAlCa,OAoCdC,UApCc,CAoCD,UAAM,CACf,MAAKjB,QAAL,CAAe,CAAEc,WAAW,CAAE,EAAf,CAAf,EACH,CAtCa,OAwCdI,QAxCc,CAwCH,SAACL,CAAD,CAAO,CACdA,CAAC,CAACM,cAAF,GACA,MAAKrB,aAAL,CAAmB,MAAKsB,KAAL,CAAWN,WAA9B,EACA,MAAKG,UAAL,GACH,CA5Ca,OA8CdI,cA9Cc,CA8CG,UAAM,CACnB,MAAKrB,QAAL,CAAc,CACZU,SAAS,CACP,MAAKU,KAAL,CAAWV,SAAX,EAAwB,MAAKU,KAAL,CAAWE,aAAnC,CACE,MAAKF,KAAL,CAAWV,SADb,CACyB,MAAKU,KAAL,CAAWV,SAAX,CAAuB,EAHtC,CAAd,EAKD,CApDW,CAEV,MAAKU,KAAL,CAAa,CACTN,WAAW,CAAE,EADJ,CAETb,SAAS,CAAE,KAFF,CAGTM,QAAQ,CAAE,EAHD,CAITI,KAAK,CAAE,IAJE,CAKTD,SAAS,CAAE,CALF,CAMTF,KAAK,CAAE,IANE,CAAb,CAFU,aAUb,C,0EA4CQ,iBACgE,KAAKY,KADrE,CACGN,WADH,aACGA,WADH,CACgBP,QADhB,aACgBA,QADhB,CAC0BN,SAD1B,aAC0BA,SAD1B,CACqCU,KADrC,aACqCA,KADrC,CAC4CH,KAD5C,aAC4CA,KAD5C,CACmDE,SADnD,aACmDA,SADnD,CAGL,mBACI,2BAAK,SAAS,CAAC,WAAf,eACI,2BAAK,SAAS,CAAC,KAAf,eACI,oBAAC,aAAD,EACI,WAAW,CAAEI,WADjB,CAEI,QAAQ,CAAE,KAAKI,QAFnB,CAGI,mBAAmB,CAAE,KAAKN,mBAH9B,EADJ,cAKI,oBAAC,WAAD,EACI,QAAQ,CAAEL,QADd,CAEI,SAAS,CAAEN,SAFf,CAGI,YAAY,CAAEU,KAHlB,CAII,KAAK,CAAEH,KAJX,CAKI,QAAQ,CAAEE,SALd,EALJ,cAYI,oBAAC,QAAD,EACI,QAAQ,CAAEH,QADd,CAEI,SAAS,CAAEN,SAFf,CAGI,OAAO,CAAE,KAAKoB,cAHlB,EAZJ,CADJ,CADJ,CAsBH,C,oCAhFgC5B,KAAK,CAAC8B,S,EAmF3C,cAAe1B,CAAAA,sBAAf","sourcesContent":["import * as React from 'react';\nimport { ProductSearch } from '../ProductSearch/ProductSearch';\nimport ProductList from './ProductResult/ProductList';\nimport { LoadMore } from '../Loadmore/LoadMore';\n\nclass ProductSearchContainer extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            searchValue: '',\n            isLoading: false,\n            products: [],\n            error: null,\n            showItems: 4,\n            total: null\n        }\n    }\n\n    fetchProducts = async (query) => {\n        this.setState({ isLoading: true })\n        const apiUrl = 'https://cors-anywhere.herokuapp.com/https://skincare-api.herokuapp.com/product?q=';\n\n        try {\n            const res = await fetch(apiUrl + query);\n            const data = await res.json();\n\n            this.setState({\n                products: data,\n                isLoading: false,\n                total: data.length,\n                showItems: 4,\n            })\n        } catch (error) {\n            this.setState({ error, isLoading: false})\n        }\n\n    }\n\n    onSearchInputChange = (e) => {\n        this.setState({ searchValue: e.target.value})\n    }\n\n    resetInput = () => {\n        this.setState ({ searchValue: '' })\n    }\n\n    onSearch = (e) => {\n        e.preventDefault();\n        this.fetchProducts(this.state.searchValue)\n        this.resetInput()\n    }\n\n    handleShowMore = () => {\n        this.setState({\n          showItems: \n            this.state.showItems >= this.state.totalProducts ?\n              this.state.showItems : this.state.showItems + 10\n        })\n      }\n\n    render() {\n        const { searchValue, products, isLoading, error, total, showItems} = this.state;\n\n        return (\n            <div className=\"container\">\n                <div className=\"row\">\n                    <ProductSearch\n                        searchValue={searchValue}\n                        onSearch={this.onSearch} \n                        onSearchInputChange={this.onSearchInputChange}/>\n                    <ProductList  \n                        products={products} \n                        isLoading={isLoading}\n                        errorMessage={error}\n                        total={total}\n                        pageSize={showItems}\n                    />\n                    <LoadMore \n                        products={products} \n                        isLoading={isLoading}\n                        onClick={this.handleShowMore}\n                    />\n                </div>\n            </div> \n        )\n    }\n}\n\nexport default ProductSearchContainer;"]},"metadata":{},"sourceType":"module"}