{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ped/Desktop/jolimoi-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ped/Desktop/jolimoi-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/ped/Desktop/jolimoi-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ped/Desktop/jolimoi-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/ped/Desktop/jolimoi-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/ped/Desktop/jolimoi-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/ped/Desktop/jolimoi-test/src/components/ProductSearch/ProductSearchContainer.js\";\nimport * as React from 'react';\nimport { ProductSearch } from '../ProductSearch/ProductSearch';\nimport ProductList from './ProductResult/ProductList';\nimport { LoadMore } from '../Loadmore/LoadMore';\n\nvar ProductSearchContainer = /*#__PURE__*/function (_React$Component) {\n  _inherits(ProductSearchContainer, _React$Component);\n\n  var _super = _createSuper(ProductSearchContainer);\n\n  function ProductSearchContainer() {\n    var _this;\n\n    _classCallCheck(this, ProductSearchContainer);\n\n    _this = _super.call(this);\n\n    _this.fetchProducts = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(query) {\n        var apiUrl, res, data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.setState({\n                  isLoading: true\n                });\n\n                apiUrl = 'https://cors-anywhere.herokuapp.com/https://skincare-api.herokuapp.com/product?q=';\n                _context.prev = 2;\n                _context.next = 5;\n                return fetch(apiUrl + query);\n\n              case 5:\n                res = _context.sent;\n                _context.next = 8;\n                return res.json();\n\n              case 8:\n                data = _context.sent;\n\n                _this.setState({\n                  products: data,\n                  isLoading: false,\n                  total: data.length,\n                  showItems: 4\n                });\n\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](2);\n\n                _this.setState({\n                  error: _context.t0,\n                  isLoading: false\n                });\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 12]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.onSearchInputChange = function (e) {\n      _this.setState({\n        searchValue: e.target.value.trim()\n      });\n    };\n\n    _this.resetInput = function () {\n      _this.setState({\n        searchValue: ''\n      });\n    };\n\n    _this.onSearch = function (e) {\n      e.preventDefault();\n\n      _this.fetchProducts(_this.state.searchValue);\n\n      _this.resetInput();\n    };\n\n    _this.handleShowMore = function () {\n      _this.setState({\n        showItems: _this.state.showItems >= _this.state.total ? _this.state.showItems : _this.state.showItems + 10\n      });\n    };\n\n    _this.state = {\n      searchValue: '',\n      isLoading: false,\n      products: [],\n      error: null,\n      showItems: 4,\n      total: null\n    };\n    return _this;\n  }\n\n  _createClass(ProductSearchContainer, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          searchValue = _this$state.searchValue,\n          products = _this$state.products,\n          isLoading = _this$state.isLoading,\n          error = _this$state.error,\n          total = _this$state.total,\n          showItems = _this$state.showItems;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(ProductSearch, {\n        searchValue: searchValue,\n        onSearch: this.onSearch,\n        onSearchInputChange: this.onSearchInputChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(ProductList, {\n        products: products,\n        isLoading: isLoading,\n        errorMessage: error,\n        total: total,\n        pageSize: showItems,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(LoadMore, {\n        isLoading: isLoading,\n        onClick: this.handleShowMore,\n        total: total,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }\n      })));\n    }\n  }]);\n\n  return ProductSearchContainer;\n}(React.Component);\n\nexport default ProductSearchContainer;","map":{"version":3,"sources":["/Users/ped/Desktop/jolimoi-test/src/components/ProductSearch/ProductSearchContainer.js"],"names":["React","ProductSearch","ProductList","LoadMore","ProductSearchContainer","fetchProducts","query","setState","isLoading","apiUrl","fetch","res","json","data","products","total","length","showItems","error","onSearchInputChange","e","searchValue","target","value","trim","resetInput","onSearch","preventDefault","state","handleShowMore","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { ProductSearch } from '../ProductSearch/ProductSearch';\nimport ProductList from './ProductResult/ProductList';\nimport { LoadMore } from '../Loadmore/LoadMore';\n\nclass ProductSearchContainer extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            searchValue: '',\n            isLoading: false,\n            products: [],\n            error: null,\n            showItems: 4,\n            total: null\n        }\n    }\n\n    fetchProducts = async (query) => {\n        this.setState({ isLoading: true })\n        const apiUrl = 'https://cors-anywhere.herokuapp.com/https://skincare-api.herokuapp.com/product?q=';\n\n        try {\n            const res = await fetch(apiUrl + query);\n            const data = await res.json();\n\n            this.setState({\n                products: data,\n                isLoading: false,\n                total: data.length,\n                showItems: 4,\n            })\n        } catch (error) {\n            this.setState({ error, isLoading: false})\n        }\n\n    }\n\n    onSearchInputChange = (e) => {\n        this.setState({ searchValue: e.target.value.trim()})\n    }\n\n    resetInput = () => {\n        this.setState ({ searchValue: '' })\n    }\n\n    onSearch = (e) => {\n        e.preventDefault();\n        this.fetchProducts(this.state.searchValue)\n        this.resetInput()\n    }\n\n    handleShowMore = () => {\n        this.setState({\n          showItems: \n            this.state.showItems >= this.state.total ?\n              this.state.showItems : this.state.showItems + 10\n        })\n    }\n\n    render() {\n        const { searchValue, products, isLoading, error, total, showItems} = this.state;\n\n        return (\n            <div className=\"container\">\n                <div className=\"row\">\n                    <ProductSearch\n                        searchValue={searchValue}\n                        onSearch={this.onSearch} \n                        onSearchInputChange={this.onSearchInputChange}/>\n                    <ProductList  \n                        products={products} \n                        isLoading={isLoading}\n                        errorMessage={error}\n                        total={total}\n                        pageSize={showItems}\n                    />\n                    <LoadMore \n                        isLoading={isLoading}\n                        onClick={this.handleShowMore}\n                        total={total}\n                    />\n                </div>\n            </div> \n        )\n    }\n}\n\nexport default ProductSearchContainer;"]},"metadata":{},"sourceType":"module"}